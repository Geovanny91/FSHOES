<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html lang="es">

    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <!-- Meta, title, CSS, favicons, etc. -->
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>FShoes system</title>

        <!-- Bootstrap core CSS -->

        <link href="css/bootstrap.min.css" rel="stylesheet">

        <link href="fonts/css/font-awesome.min.css" rel="stylesheet">
        <link href="css/animate.min.css" rel="stylesheet">

        <!-- Custom styling plus plugins -->
        <link href="css/custom.css" rel="stylesheet">
        <link href="css/icheck/flat/green.css" rel="stylesheet">  

        <link rel="stylesheet" type="text/css" href="css/progressbar/bootstrap-progressbar-3.3.0.css">

        <!--[if lt IE 9]>
              <script src="../assets/js/ie8-responsive-file-warning.js"></script>
              <![endif]-->

        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
                <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
                <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
              <![endif]-->

    </head>

    <body style="background:#F7F7F7;">

        <div class="">
            <a class="hiddenanchor" id="toregister"></a>
            <a class="hiddenanchor" id="tologin"></a>

            <div id="wrapper">
                <div id="login" class="animate form">
                    <section class="login_content">
                        <form method="POST" action="VerificarAcesso">
                            <h1>Autenticaciòn</h1>
                            <div>
                                <input type="text" name="usuario" class="form-control" placeholder="Usuario" required="" />
                            </div>
                            <div>
                                <input type="password" name="contrasena" class="form-control" placeholder="Contraseña" required="" />
                            </div>
                            <div>
                                <button type="submit" class="btn btn-default submit" >Ingresar</button>
                                <!--<a class="reset_pass" href="#">Lost your password?</a>-->
                            </div>
                            <div class="clearfix"></div>
                            <div class="separator">

                                <p class="change_link">¿Nuevo en el Sistema?
                                    <a href="#toregister" class="to_register"> Registrar nuevo trabajador</a>
                                </p>
                                <div class="clearfix"></div>
                                <br />
                                <div>
                                    <h1><i class="fa fa-paw" style="font-size: 26px;"></i> FHOES </h1>
                                </div>
                            </div>
                        </form>
                        <!-- form -->
                    </section>
                    <!-- content -->
                </div>
                <div id="register" class="animate form">
                    <section class="login_content">
                        <form id="frmTrabajador">
                            <h1>Nuevo Trabajador</h1>
                            <div>
                                <input type="text" name="dni" id="dni" class="form-control" placeholder="Dni" maxlength="8"/>
                            </div>            
                            <div>
                                <input type="text" name="nombres" id="nombres" class="form-control" placeholder="Nombres" required="" />
                            </div>
                            <div>
                                <input type="text" name="ape_paterno" id="ape_paterno" class="form-control" placeholder="Apellido Paterno" required="" />
                            </div>
                            <div>
                                <input type="text" name="ape_materno" id="ape_materno" class="form-control" placeholder="Apellido Materno" required="" />
                            </div>
                            <div>
                                <input type="text" name="direccion" id="direccion" class="form-control" placeholder="Dirección" required="" />
                            </div>
                            <div>
                                <input type="text" name="telefono" id="telefono" class="form-control" placeholder="Teléfono" required="" />
                            </div>
                            <div>
                                <input type="text" name="celular" id="celular" class="form-control" placeholder="Celular" required="" />
                            </div>
                            <div>
                                <input type="text" name="fecha_nacimiento" id="fecha_nacimiento" class="form-control" placeholder="Fecha. Nacimiento" required="" />
                            </div>
                            <div>
                                <input type="text" name="usuario" id="usuario" class="form-control" placeholder="Usuario" required="" />
                            </div>
                            <div>
                                <input type="password" name="contrasena" id="contrasena" class="form-control" placeholder="Contraseña" required="" />
                            </div>
                            <div>
                                <select id="cboproceso" class="form-control">
                                </select>
                            </div>
                            <br>
                            <div>
                                <button class="btn btn-default submit" type="submit">Guardar</button>
                            </div>
                            <div class="clearfix"></div>
                            <div class="separator">

                                <p class="change_link">¿Ya tienes cuenta?
                                    <a href="#tologin" class="to_register"> Ingresar </a>
                                </p>
                                <div class="clearfix"></div>
                                <br />
                                <div>
                                    <h1><i class="fa fa-paw" style="font-size: 26px;"></i> FHOES </h1>                
                                </div>
                            </div>
                        </form>
                        <!-- form -->
                    </section>
                    <!-- content -->
                </div>
            </div>
        </div>

        <script src="js/jquery.min.js"></script>
        <script src="js/bootstrap.min.js"></script>

        <!-- bootstrap progress js -->
        <script src="js/progressbar/bootstrap-progressbar.min.js"></script>
        <!-- icheck -->
        <script src="js/icheck/icheck.min.js"></script>

        <script src="js/custom.js"></script>
        <!-- pace -->
        <script src="js/pace/pace.min.js"></script>
        <!-- PNotify -->
        <script type="text/javascript" src="js/notify/pnotify.core.js"></script>
        <script type="text/javascript" src="js/notify/pnotify.buttons.js"></script>
        <script type="text/javascript" src="js/notify/pnotify.nonblock.js"></script>

        <script>
            $(function () {
                var cnt = 10; //$("#custom_notifications ul.notifications li").length + 1;
                TabbedNotification = function (options) {
                    var message = "<div id='ntf" + cnt + "' class='text alert-" + options.type + "' style='display:none'><h2><i class='fa fa-bell'></i> " + options.title +
                            "</h2><div class='close'><a href='javascript:;' class='notification_close'><i class='fa fa-close'></i></a></div><p>" + options.text + "</p></div>";

                    if (document.getElementById('custom_notifications') == null) {
                        alert('doesnt exists');
                    } else {
                        $('#custom_notifications ul.notifications').append("<li><a id='ntlink" + cnt + "' class='alert-" + options.type + "' href='#ntf" + cnt + "'><i class='fa fa-bell animated shake'></i></a></li>");
                        $('#custom_notifications #notif-group').append(message);
                        cnt++;
                        CustomTabs(options);
                    }
                }

                CustomTabs = function (options) {
                    $('.tabbed_notifications > div').hide();
                    $('.tabbed_notifications > div:first-of-type').show();
                    $('#custom_notifications').removeClass('dsp_none');
                    $('.notifications a').click(function (e) {
                        e.preventDefault();
                        var $this = $(this),
                                tabbed_notifications = '#' + $this.parents('.notifications').data('tabbed_notifications'),
                                others = $this.closest('li').siblings().children('a'),
                                target = $this.attr('href');
                        others.removeClass('active');
                        $this.addClass('active');
                        $(tabbed_notifications).children('div').hide();
                        $(target).show();
                    });
                }

                CustomTabs();

                var tabid = idname = '';
                $(document).on('click', '.notification_close', function (e) {
                    idname = $(this).parent().parent().attr("id");
                    tabid = idname.substr(-2);
                    $('#ntf' + tabid).remove();
                    $('#ntlink' + tabid).parent().remove();
                    $('.notifications a').first().addClass('active');
                    $('#notif-group div').first().css('display', 'block');
                });
            })
        </script>

        <script type="text/javascript">
            /*Esta alerta es la que sale al inicio en esta plantilla login*/
            /*var permanotice, tooltip, _alert;
             
             $(function() {
             new PNotify({
             title: "PNotify",
             type: "dark",
             text: "Welcome. Try hovering over me. You can click things behind me, because I'm non-blocking.",
             nonblock: {
             nonblock: true
             },
             before_close: function(PNotify) {
             // You can access the notice's options with this. It is read only.
             //PNotify.options.text;
             
             // You can change the notice's options after the timer like this:
             PNotify.update({
             title: PNotify.options.title + " - Enjoy your Stay",
             before_close: null
             });
             PNotify.queueRemove();
             return false;
             }
             });
             
             });*/
        </script>
        <script>
            $(document).on("ready", function () {
                comboProceso();
                registrarTrabjador();                
            });

            function registrarTrabjador() {
                $("#frmTrabajador").on("submit", function (e) {
                    e.preventDefault();                                        
                    var proceso = $("#cboproceso option:selected").val(),                   
                        dni = $("#dni").val(),
                        nombres = $("#nombres").val(),
                        ape_paterno = $("#ape_paterno").val(),
                        ape_materno = $("#ape_materno").val(),
                        direccion = $("#direccion").val(),
                        telefono = $("#telefono").val(),
                        celular = $("#celular").val(),
                        fecha_nacimiento = $("#fecha_nacimiento").val(),
                        usuario = $("#usuario").val(),
                        contrasena = $("#contrasena").val();
                    var datos = {"parametro":"registrarTrabajador", "dni":dni, "nombres":nombres, "ape_paterno":ape_paterno, "ape_materno":ape_materno, "direccion":direccion, 
                                "telefono":telefono, "celular":celular, "fecha_nacimiento":fecha_nacimiento, "usuario":usuario, "contrasena":contrasena, 
                                "proceso":proceso };  
                    $.ajax({
                        method:"POST",
                        url:"Strabajador",
                        data: datos
                    }).done(function (info) {
                        console.log(typeof info);
                        if(info == "null"){                            
                            new PNotify({//ver lo de la notificación
                                title: 'Mensaje de Advertencia',
                                text: 'Ingrese todos los datos solicitados',
                                hide: false
                            });                            
                        }else if(info){ 
                            new PNotify({//ver lo de la notificación
                                title: 'Mensaje de éxito',
                                text: 'Se guardaron los datos satisfactoriamente.',
                                type: 'success'
                            });
                            limpiarCampos();
                        }
                    });
                });
            }
            
            function limpiarCampos(){
                //$("#cboproceso").val();
                $("#dni").val("");
                $("#nombres").val("");
                $("#ape_paterno").val("");
                $("#ape_materno").val("");
                $("#direccion").val("");
                $("#telefono").val("");
                $("#celular").val("");
                $("#fecha_nacimiento").val("");
                $("#usuario").val("");
                $("#contrasena").val("");
            }
            
            function comboProceso(){
                var parametro = "listarcomboProceso";
                $.ajax({
                   method: "POST",
                   url: "Sproceso",
                   data: {"parametro":parametro}
                }).done(function(data){
                    if(data != "")
                        $("#cboproceso").html(data);                        
                    else{                        
                    }
                });
            }

        </script>

    </body>

</html>

